var hairlov=hairlov||{};hairlov.application={init:function(){this.stickyNavbar.init(),$(".navbar-header > button").on("click",this.collapseSiblings())},collapseSiblings:function(){return console.log("test2"),function(event){$brothers=$(this).siblings(),$brothers.each(function(){$($(this).data("target")).removeClass("in")})}}},hairlov.application.stickyNavbar={init:function(){$(window).scroll(this.createWindowScrollListener())},createWindowScrollListener:function(){return function(){var $navbar=$("#header + .navbar"),$header=$("#header"),$scroll=$(window).scrollTop();$scroll>=$header.outerHeight()?($("body").css("padding-top",$navbar.outerHeight()),$navbar.addClass("navbar-fixed-top bordered")):($("body").css("padding-top","0px"),$navbar.removeClass("navbar-fixed-top bordered"))}}},hairlov.application.showMorePhotos={init:function(){$("#js-show-more-photo").on("click",this.createdisplayPhotoListener())},createdisplayPhotoListener:function(event){return function(event){event.preventDefault();var $current=$(this);$current.closest(".row").find(".hidden").hide().removeClass("hidden").fadeIn(),$current.remove()}}};
$(document).ready(function(){var $body=$("body"),isLogInFormLoading=!1,isProSignUpFormLoading=!1;$body.on("click",".js-modal-close",function(event){event.preventDefault(),$(this).parents(".js-modal").removeClass("is-visible")}),$body.on("click",".js-show-login-form",function(event){event.preventDefault(),$(".js-login-form").addClass("is-visible"),$("#login-email").focus()}),$body.on("click",".js-signup-form-submit",function(event){$(".js-is-signup").val(1)}),$("#logInForm").on("submit",function(event){event.preventDefault();var $form=$(this),$submitButton=$(".js-login-form-submit"),$errorMessage=$(".js-login-form-error"),$formRows=$(".js-login-form-row");return isLogInFormLoading===!0?!1:(isLogInFormLoading=!0,$submitButton.data("original-text",$submitButton.text()),$submitButton.text("Connexion …"),$errorMessage.html("").addClass("hidden"),$formRows.removeClass("has-error"),void $.ajax({url:$form.attr("action"),type:"POST",data:$form.serialize(),dataType:"json"}).always(function(){isLogInFormLoading=!1,$submitButton.text($submitButton.data("original-text"))}).done(function(result){result.success===!0?(window.location.replace(result.route),$submitButton.text("Bienvenue !")):($errorMessage.html(result.message).removeClass("hidden"),$formRows.addClass("has-error"))}).fail(function(){$errorMessage.html("Identifiants invalides").removeClass("hidden"),$formRows.addClass("has-error")}))}),$body.on("click",".js-show-pro-signup-form",function(event){event.preventDefault(),$(".js-pro-signup-form").addClass("is-visible"),$("#signup-lastname").focus()}),$("#professionnalSignUpForm").on("submit",function(event){event.preventDefault();var $form=$(this),$submitButton=$(".js-pro-signup-form-submit"),$errorMessage=$(".js-pro-signup-form-error"),$formRows=$(".js-pro-signup-form-row");return isProSignUpFormLoading===!0?!1:(isProSignUpFormLoading=!0,$submitButton.data("original-text",$submitButton.text()),$submitButton.text("Connexion …"),$errorMessage.html("").addClass("hidden"),$(".js-pro-signup-form-input-error").remove(),$formRows.removeClass("has-error"),void $.ajax({url:$form.attr("action"),type:"POST",data:$form.serialize(),dataType:"json"}).always(function(){isProSignUpFormLoading=!1,$submitButton.text($submitButton.data("original-text"))}).done(function(result){if(result.success===!0)window.location.replace(result.route),$submitButton.text("Bienvenue !");else if($errorMessage.html(result.message).removeClass("hidden"),result.hasOwnProperty("errors")){if(result.errors.hasOwnProperty("first-name"))for(var index in result.errors["first-name"])$("#signup-firstname").after('<div class="help-block js-pro-signup-form-input-error">'+result.errors["first-name"][index]+"</div>"),$("#signup-firstname").parent().addClass("has-error");if(result.errors.hasOwnProperty("last-name"))for(var index in result.errors["last-name"])$("#signup-lastname").after('<div class="help-block js-pro-signup-form-input-error">'+result.errors["last-name"][index]+"</div>"),$("#signup-lastname").parent().addClass("has-error");if(result.errors.hasOwnProperty("password"))for(var index in result.errors.password)$("#signup-password").after('<div class="help-block js-pro-signup-form-input-error">'+result.errors.password[index]+"</div>"),$("#signup-password").parent().addClass("has-error");if(result.errors.hasOwnProperty("phone"))for(var index in result.errors.phone)$("#signup-phone").after('<div class="help-block js-pro-signup-form-input-error">'+result.errors.phone[index]+"</div>"),$("#signup-phone").parent().addClass("has-error");if(result.errors.hasOwnProperty("email"))for(var index in result.errors.email)$("#signup-email").after('<div class="help-block js-pro-signup-form-input-error">'+result.errors.email[index]+"</div>"),$("#signup-email").parent().addClass("has-error");if(result.errors.hasOwnProperty("account-type"))for(var index in result.errors["account-type"])$("#signup-account-type").after('<div class="help-block js-pro-signup-form-input-error">'+result.errors.email[index]+"</div>"),$("#signup-account-type").parent().addClass("has-error");if(result.errors.hasOwnProperty("referral"))for(var index in result.errors.referral)$("#signup-referral").after('<div class="help-block js-pro-signup-form-input-error">'+result.errors.referral[index]+"</div>"),$("#signup-referral").parent().addClass("has-error");if(result.errors.hasOwnProperty("terms"))for(var index in result.errors.terms)$(".js-signup-terms-input").after('<div class="help-block js-pro-signup-form-input-error">'+result.errors.terms[index]+"</div>"),$(".js-signup-terms-input").parent().addClass("has-error")}}).fail(function(){$errorMessage.html("Identifiants invalides").removeClass("hidden"),$formRows.addClass("has-error")}))}),""!=$(".js-pro-signup-email-input").val()&&$(".js-pro-signup-form").addClass("is-visible"),""!=$(".js-pro-signup-account-type-input").val()&&null!==$(".js-pro-signup-account-type-input").val()&&$(".js-pro-signup-form").addClass("is-visible")});
hairlov.application.index=hairlov.application.index||{},hairlov.application.index.customerLandingPage={$facebookLoginButton:null,$facebookLoginForm:null,$facebookLoginAccessTokenElement:null,init:function(facebookAppId){this.facebookAppId=facebookAppId,this.$facebookLoginButton=$(".js-facebook-login"),this.$facebookLoginForm=$(".js-facebook-log-in-form"),this.$facebookLoginAccessTokenElement=$(".js-facebook-log-in-access-token"),function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];d.getElementById(id)||(js=d.createElement(s),js.id=id,js.src="//connect.facebook.net/en_US/sdk.js",fjs.parentNode.insertBefore(js,fjs))}(document,"script","facebook-jssdk");var self=this;window.fbAsyncInit=function(){FB.init({appId:self.facebookAppId,cookie:!0,xfbml:!0,version:"v2.5"})},this.$facebookLoginButton.on("click",this.createShowFacebookLoginListener())},createShowFacebookLoginListener:function(){var self=this;return function(event){FB.login(function(response){response.authResponse&&(self.$facebookLoginAccessTokenElement.val(response.authResponse.accessToken),self.$facebookLoginForm.submit())},{scope:"public_profile,email"}),event.preventDefault()}}};
hairlov.application.index=hairlov.application.index||{},hairlov.application.index.index={$body:null,init:function(){this.$body=$("body"),this.$body.on("click",".pinterest-more",this.createShowMoreFashionImagesListener())},createShowMoreFashionImagesListener:function(clickEvent){return function(event){var $button=$(this),$week=$button.data("week"),$year=$button.data("year"),$page=$button.data("page");$.ajax({url:"/load-more-fashion-images",type:"POST",data:{week:$week,year:$year,page:$page},dataType:"html"}).done(function(result){$button.parents(".pinterest").html(result)}),event.preventDefault()}}};
hairlov.application.index=hairlov.application.index||{},hairlov.application.index.professionalLandingPage={$addressInput:null,init:function(){this.$addressInput=$(".js-address"),this.addressAutocomplete=new google.maps.places.Autocomplete(this.$addressInput[0],{types:["geocode"],componentRestrictions:{country:"fr"}}),this.addressAutocomplete.addListener("place_changed",this.createAutocompleteAddressSelectedListener()),this.$addressInput.on("keydown",function(event){13===event.which&&$(".pac-container:visible").length&&event.preventDefault()})},createAutocompleteAddressSelectedListener:function(){var self=this;return function(){var place=self.addressAutocomplete.getPlace();place.geometry&&($(".js-address-latitude").val(place.geometry.location.lat()),$(".js-address-longitude").val(place.geometry.location.lng()),addressComponents=place.address_components,5===addressComponents.length?(address=addressComponents[0].long_name,zipcode=addressComponents[4].long_name,city=addressComponents[1].long_name):6===addressComponents.length?(address=addressComponents[0].long_name,zipcode=addressComponents[5].long_name,city=addressComponents[1].long_name):7===addressComponents.length&&(address=addressComponents[0].long_name+" "+addressComponents[1].long_name,zipcode=addressComponents[6].long_name,city=addressComponents[2].long_name),$(".js-address-address").val(address),$(".js-address-zipcode").val(zipcode),$(".js-address-city").val(city))}}};
hairlov.application.index=hairlov.application.index||{},hairlov.application.index.setLocation={$addressInput:null,init:function(){this.$addressInput=$(".js-address-location-city"),this.addressAutocomplete=new google.maps.places.Autocomplete(this.$addressInput[0],{types:["geocode"],componentRestrictions:{country:"fr"}}),this.addressAutocomplete.addListener("place_changed",this.createAutocompleteAddressSelectedListener()),this.$addressInput.on("keydown",function(event){$(".pac-container").css("z-index",1050),13===event.which&&$(".pac-container:visible").length&&event.preventDefault()})},createAutocompleteAddressSelectedListener:function(){var self=this;return function(){var place=self.addressAutocomplete.getPlace();place.geometry&&($(".js-location-latitude").val(place.geometry.location.lat()),$(".js-location-longitude").val(place.geometry.location.lng()),addressComponents=place.address_components,4===addressComponents.length?city=addressComponents[0].long_name:5===addressComponents.length?city=addressComponents[0].long_name:6===addressComponents.length?city=addressComponents[1].long_name:7===addressComponents.length&&(city=addressComponents[2].long_name),$(".js-location-city").val(city))}}};
hairlov.application.jobService=hairlov.application.jobService||{},hairlov.application.jobService.booking={init:function(){this.initCheckboxPayment()},initCheckboxPayment:function(){$("#other-address-payment").on("change",this.createDisabledInputListener())},createDisabledInputListener:function(){return function(){$("#address-prestation-payment input").each(function(){var $current=$(this);$current.attr("disabled")?$current.removeAttr("disabled"):$current.attr("disabled","disabled")})}}};
hairlov.application.jobService=hairlov.application.jobService||{},hairlov.application.jobService.search={$document:null,$datepicker:null,$dropdownMenuForm:null,addressAutocomplete:null,isFormLocked:!1,$form:null,$addressInput:null,init:function(){this.$document=$(document),this.$datepicker=$(".datepicker-search"),this.$dropdownMenuForm=$(".dropdown-menu-form"),this.initDatepicker(),this.initSearchDropdown(),this.$form=$(".js-search-form"),this.$addressInput=$(".js-address"),this.addressAutocomplete=new google.maps.places.Autocomplete(this.$addressInput[0],{types:["geocode"],componentRestrictions:{country:"fr"}}),this.addressAutocomplete.addListener("place_changed",this.createAutocompleteAddressSelectedListener()),this.$addressInput.on("keydown",function(event){13===event.which&&$(".pac-container:visible").length&&event.preventDefault()})},initDatepicker:function(){var nowDate=new Date,today=new Date(nowDate.getFullYear(),nowDate.getMonth(),nowDate.getDate(),0,0,0,0);this.$datepicker.datepicker({language:"fr",startDate:today,autoclose:!0}),this.$datepicker.datepicker().on("changeDate",this.createSelectDateListener())},createSelectDateListener:function(){return function(event){var d=event.date,date=d.getFullYear()+"-"+("0"+(d.getMonth()+1)).slice(-2)+"-"+("0"+d.getDate()).slice(-2);$('input[name="date_hidden"]').val(date)}},createAutocompleteAddressSelectedListener:function(){var self=this;return function(){var place=self.addressAutocomplete.getPlace();place.geometry&&($(".js-latitude").val(place.geometry.location.lat()),$(".js-longitude").val(place.geometry.location.lng()))}},initSearchDropdown:function(){this.preventClick(),this.$dropdownMenuForm.on("change","input:checkbox",this.createShowDropdownLengthListener()),this.$dropdownMenuForm.on("change","input:radio",this.createShowDropdownLengthListener("radio"))},preventClick:function(){this.$document.on("click",".dropdown-menu.dropdown-menu-form",function(event){event.stopPropagation()})},createShowDropdownLengthListener:function(type){return function(){var type=type||"checkbox",parent=$(this).closest(".dropdown-menu-form"),$input=parent.find("input:"+type+":checked");"radio"===type&&($input=$input.not('input:radio[value="0"]'));var len=$input.length;len>0?parent.closest(".btn-group").find("button .counter").text("("+len+")"):parent.closest(".btn-group").find("button .counter").text(" ")}}};
hairlov.application.professional=hairlov.application.professional||{},hairlov.application.professional.professionalPage={$lovSwitch:null,init:function(){this.$lovSwitch=$(".js-like-switch"),hairlov.application.showMorePhotos.init(),this.$lovSwitch.on("click",this.createLikeSwitchListener())},createLikeSwitchListener:function(){var self=this;return function(event){event.preventDefault();var that=$(this);$.ajax({url:"/switch-lov",type:"POST",data:{professionalId:self.$lovSwitch.data("professional")},dataType:"json",success:function(data){var $span=that.find("span"),oldValue=parseInt($span.text());"add"==data.action?$span.text(oldValue+1):$span.text(oldValue-1)}})}}};
hairlov.application.salon=hairlov.application.salon||{},hairlov.application.salon={init:function(){$(".owl-carousel").owlCarousel({singleItem:!0})}};